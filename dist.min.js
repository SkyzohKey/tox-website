var ScrollSpy=function(){function e(){document.addEventListener?(document.addEventListener("touchmove",n,!1),document.addEventListener("scroll",n,!1)):window.attachEvent&&window.attachEvent("onscroll",n)}function t(e){var t={};t.domElement=e,t.isInViewPort=!0,a[e.id]=t}function n(){var e=document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop;for(var t in a){var n=a[t],o=l(n.domElement),r=e;0==n.isInViewPort&&(r-=n.domElement.clientHeight),r>o?(s(n.domElement),n.isInViewPort=!1):0==n.isInViewPort&&(i(n.domElement),n.isInViewPort=!0)}}function s(e){o("ScrollSpyOutOfSight",e)}function i(e){o("ScrollSpyBackInSight",e)}function o(e,t){if(document.createEvent){var n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!0),n.data=t,document.dispatchEvent(n)}else if(document.createEventObject){var n=document.createEventObject();n.data=t,n.expando=e,document.fireEvent("onpropertychange",n)}}function l(e){for(var t=0;null!=e;)t+=e.offsetTop,e=e.offsetParent;return t}var a={};return{init:e,spyOn:t}},addEvent=function(e,t,n){null!=e&&void 0!==e&&(e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n)};!function(e,t){var n=function(){this._scrollSpy=new ScrollSpy,this._scrollSpy.init(),this.header=t.querySelector("#site-header")||null,this.title=t.querySelector(".page-title")||null,this.secondNav=t.querySelector("nav.second-nav")||null,this.featureMessages=t.querySelector("#messages")||null,this.featureAudio=t.querySelector("#audio-calls")||null,this.featureVideo=t.querySelector("#video-calls")||null,this.featureFiles=t.querySelector("#file-transfers")||null,this.secondNavLinks=t.querySelectorAll("#features-nav a")||null,this.linkMessages=t.querySelector("#link-messages")||null,this.linkAudio=t.querySelector("#link-audio-calls")||null,this.linkVideo=t.querySelector("#link-video-calls")||null,this.linkFiles=t.querySelector("#link-file-transfers")||null};n.prototype.init=function(){console.log(this.header),console.log(this.secondNav),this.enableScrollSpy(),this.addEvents()},n.prototype.enableScrollSpy=function(){null==this.secondNav&&null!=this.header&&this._scrollSpy.spyOn(this.header),null!=this.secondNav&&(this._scrollSpy.spyOn(this.secondNav),this._scrollSpy.spyOn(this.featureMessages),this._scrollSpy.spyOn(this.featureAudio),this._scrollSpy.spyOn(this.featureVideo),this._scrollSpy.spyOn(this.featureFiles))},n.prototype.addEvents=function(){if(addEvent(t,"ScrollSpyOutOfSight",function(e){var n=t.documentElement.scrollTop?t.documentElement.scrollTop:t.body.scrollTop;null!=this.header&&null==this.secondNav&&e.data.id==this.header.id&&0==this.header.classList.contains("fixed")&&n>=this.header.offsetHeight&&(this.header.classList.add("fixed"),t.body.style.marginTop=this.header.offsetHeight+"px"),null!=this.secondNav&&e.data.id==this.secondNav.id&&0==this.secondNav.classList.contains("fixed")&&n>=this.secondNav.offsetHeight&&(this.secondNav.classList.add("fixed"),this.header.classList.remove("fixed"),t.body.style.marginTop=this.secondNav.offsetHeight+"px")}.bind(this)),addEvent(t,"ScrollSpyBackInSight",function(e){var n=t.documentElement.scrollTop?t.documentElement.scrollTop:t.body.scrollTop;if(null!=this.header&&null==this.secondNav&&e.data.id==this.header.id&&1==this.header.classList.contains("fixed")&&n<=this.header.offsetHeight&&(this.header.classList.remove("fixed"),t.body.style.marginTop="0"),null!=this.secondNav){var s=this.secondNav.offsetHeight;e.data.id==this.secondNav.id&&1==this.secondNav.classList.contains("fixed")&&n<=s&&(this.secondNav.classList.remove("fixed"),t.body.style.marginTop="0",this.header.classList.remove("fixed"))}}.bind(this)),null!=this.secondNavLinks)for(var e=0,n=this.secondNavLinks.length;e<n;e++){var s=this.secondNavLinks[e],i=this;addEvent(s,"click",function(e){var t=this.href,n=i.secondNav.clientHeight;i.scrollToAnchor(t,n)})}},n.prototype.scrollToAnchor=function(n,s){if(0==n.indexOf("#")){t.getElementById(n);if(history&&"pushState"in history)return history.pushState({},t.title,e.location.pathname+n),!1}},(new n).init()}(window,document);